<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222"/>


  
  
  <link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css"/>



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2"/>





  <meta http-equiv="Cache-Control" content="no-transform"/>
  <meta http-equiv="Cache-Control" content="no-siteapp"/>
















  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext"/>
  






<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2"/>

<link rel="stylesheet" href="/css/main.css?v=6.7.0"/>


  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico?v=6.7.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=6.7.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=6.7.0">


  <link rel="mask-icon" href="/images/favicon.ico?v=6.7.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.7.0',
    sidebar: {"position":"left","display":"hide","offset":12,"b2t":true,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Introduction to Algorithms I. All meterials credit to Princeton.">
<meta name="keywords" content="java,algorithm,coursera,dataStructure">
<meta property="og:type" content="article">
<meta property="og:title" content="Note for coursera Princeton Algorithm I">
<meta property="og:url" content="https://bobbyliujb.github.io/2016/11/02/coursera_algorithm1/index.html">
<meta property="og:site_name" content="Bob_波波">
<meta property="og:description" content="Introduction to Algorithms I. All meterials credit to Princeton.">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://ww4.sinaimg.cn/large/9b3a5c2fgw1f9dmxo7lmpj20fh0913yx.jpg">
<meta property="og:image" content="https://ww2.sinaimg.cn/large/9b3a5c2fgw1f9ds7dg6qpj20a40anmy1.jpg">
<meta property="og:image" content="https://ww2.sinaimg.cn/large/9b3a5c2fgw1f9ds8jibjrj20mf0egjts.jpg">
<meta property="og:image" content="https://ww3.sinaimg.cn/large/9b3a5c2fgw1f9dwws0wwyj20pf0eita7.jpg">
<meta property="og:image" content="https://ww1.sinaimg.cn/large/9b3a5c2fgy1fejwlq5nvtj20ff09baau.jpg">
<meta property="og:image" content="https://ww1.sinaimg.cn/large/9b3a5c2fgy1fejyqzz1b9j20im0cn0ts.jpg">
<meta property="og:image" content="https://ww1.sinaimg.cn/large/9b3a5c2fgy1fek5wjqbxuj20i10a1gmm.jpg">
<meta property="og:image" content="https://ww1.sinaimg.cn/large/9b3a5c2fgy1fektggt7ruj20g006xmxw.jpg">
<meta property="og:image" content="https://ww1.sinaimg.cn/large/9b3a5c2fgy1fektiv93z6j20gu068js4.jpg">
<meta property="og:image" content="https://ww1.sinaimg.cn/large/9b3a5c2fgy1feku127a8qj20gf09rdhf.jpg">
<meta property="og:image" content="https://ww1.sinaimg.cn/large/9b3a5c2fgy1fel314v2v0j20iq05tjs6.jpg">
<meta property="og:image" content="https://ww1.sinaimg.cn/large/9b3a5c2fgy1fel3v5hx7ij20ez05gjs6.jpg">
<meta property="og:image" content="https://ww1.sinaimg.cn/large/9b3a5c2fgy1fel3zuw9tsj20f305p0tj.jpg">
<meta property="og:image" content="https://ww1.sinaimg.cn/large/9b3a5c2fgy1fel434t00mj20lt058myb.jpg">
<meta property="og:image" content="https://ww1.sinaimg.cn/large/9b3a5c2fgy1fel5gjkyzxj20h8051jrz.jpg">
<meta property="og:image" content="https://ww1.sinaimg.cn/large/9b3a5c2fgy1felgexk0coj20az07ygmb.jpg">
<meta property="og:image" content="https://ww1.sinaimg.cn/large/9b3a5c2fgy1felhpsdl9fj20h009c3z3.jpg">
<meta property="og:image" content="https://ww1.sinaimg.cn/large/9b3a5c2fgy1feli02gn3oj20hh07eglx.jpg">
<meta property="og:image" content="https://ww1.sinaimg.cn/large/9b3a5c2fgy1felwoqf4hrj20hg07dt92.jpg">
<meta property="og:image" content="https://ww1.sinaimg.cn/large/9b3a5c2fgy1felxvsjf1bj20df07mgm1.jpg">
<meta property="og:image" content="https://ww1.sinaimg.cn/large/9b3a5c2fgy1felxzyi9ykj20ff07rwf2.jpg">
<meta property="og:image" content="https://ww1.sinaimg.cn/large/9b3a5c2fgy1fem0raqmocj20g206omx4.jpg">
<meta property="og:updated_time" content="2017-05-29T19:00:00.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Note for coursera Princeton Algorithm I">
<meta name="twitter:description" content="Introduction to Algorithms I. All meterials credit to Princeton.">
<meta name="twitter:image" content="https://ww4.sinaimg.cn/large/9b3a5c2fgw1f9dmxo7lmpj20fh0913yx.jpg">






  <link rel="canonical" href="https://bobbyliujb.github.io/2016/11/02/coursera_algorithm1/"/>



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Note for coursera Princeton Algorithm I | Bob_波波</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Bob_波波</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br/>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br/>Tags<span class="badge">38</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br/>Categories<span class="badge">3</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br/>Archives<span class="badge">38</span></a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />Search</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://bobbyliujb.github.io/2016/11/02/coursera_algorithm1/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Bob_波波"/>
      <meta itemprop="description" content="I'm a Software Engineer!"/>
      <meta itemprop="image" content="/images/avatar.jpg"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bob_波波"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Note for coursera Princeton Algorithm I

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-11-02 23:43:55" itemprop="dateCreated datePublished" datetime="2016-11-02T23:43:55-07:00">2016-11-02</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2017-05-29 12:00:00" itemprop="dateModified" datetime="2017-05-29T12:00:00-07:00">2017-05-29</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Course/" itemprop="url" rel="index"><span itemprop="name">Course</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/11/02/coursera_algorithm1/#comments" itemprop="discussionUrl">
                
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2016/11/02/coursera_algorithm1/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2016/11/02/coursera_algorithm1/" class="leancloud_visitors" data-flag-title="Note for coursera Princeton Algorithm I">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Views: </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Symbols count in article: </span>
                
                <span title="Symbols count in article">30k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">32 mins.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><a href="https://coursera.org/learn/introduction-to-algorithms" target="_blank" rel="external">Introduction to Algorithms I</a>. All meterials credit to Princeton.<br><a id="more"></a></p>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>


<h3 id="Course-Introduction"><a href="#Course-Introduction" class="headerlink" title="Course Introduction"></a>Course Introduction</h3><p> Algorithms + Data Structures = Programs.</p>
<hr>
<h3 id="Union-Find"><a href="#Union-Find" class="headerlink" title="Union-Find"></a>Union-Find</h3><h4 id="lt-Dynamic-Connectivity"><a href="#lt-Dynamic-Connectivity" class="headerlink" title="&lt; Dynamic Connectivity"></a>&lt; Dynamic Connectivity</h4><ul>
<li>Connections are reflexible(p-&gt;p), symmetric(p-&gt;q, q-&gt;p) and transitive.</li>
<li>Connected components: Maximal sets of objects that are matually connected.</li>
</ul>
<h4 id="lt-Quick-Find"><a href="#lt-Quick-Find" class="headerlink" title="&lt; Quick-Find"></a>&lt; Quick-Find</h4><ul>
<li>Data structure: Integer array id[]. p and q are connected iff(if and only if) they have the same id.</li>
<li>Find: check if id[p] == id[q].</li>
<li>Union: merge components containing p and q, namely change <strong>all entries</strong> whose id equals id[p] to id[q].</li>
<li>Implementation &amp; Analysis: Quick-Find is a slow one for UF because the Union operation is O(N). Considering another O(N) for initialization, in total it takes \(N^2\)(<strong>quandratic</strong>) array accesses to process a sequence of N union commands on N objects.<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Eager approach for Union-Find</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickFindUF</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] id;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">QuickFindUf</span><span class="params">(<span class="keyword">int</span> len)</span> </span>&#123;</div><div class="line">        id = <span class="keyword">new</span> <span class="keyword">int</span>[len];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</div><div class="line">            id[i] = i;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isConnected</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> id[p] == id[q];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">union</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> pid = id[p];</div><div class="line">        <span class="keyword">int</span> qid = id[q];</div><div class="line">        <span class="keyword">int</span> len = id.length;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</div><div class="line">            <span class="keyword">if</span> (id[i] == pid) &#123;</div><div class="line">                id[i] = qid;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="lt-Quick-Union"><a href="#lt-Quick-Union" class="headerlink" title="&lt; Quick-Union"></a>&lt; Quick-Union</h4><ul>
<li>Data structure: Integer array id[], but id[i] refers to the parent of i.</li>
<li>Find: check if p and q have the same root.</li>
<li>Union: merge components containing p and q, namely set the id of p’s root to the id of q’s root.</li>
<li>Implementation &amp; Analysis: Quick-Union is still a slow one for UF. Since the tree might get very tall, Find can be really expensive and the Union will reach O(N) in the worst case because it includes Find operation.<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// lazy approach</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickUnionUF</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] id;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">QuickUnionUF</span><span class="params">(<span class="keyword">int</span> len)</span> </span>&#123;</div><div class="line">        id = <span class="keyword">new</span> <span class="keyword">int</span>[len];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</div><div class="line">            id[i] = i;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getRoot</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</div><div class="line">        <span class="keyword">while</span> (i != id[i]) &#123;</div><div class="line">            i = id[i];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> i;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isConnected</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> getRoot(p) == getRoot(q);</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">union</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> i = root(p);</div><div class="line">        <span class="keyword">int</span> j = root(q);</div><div class="line">        id[i] = j;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="lt-Improvements"><a href="#lt-Improvements" class="headerlink" title="&lt; Improvements"></a>&lt; Improvements</h4><ul>
<li><p>Weighted Quick-Union: In Quick-Union, to avoid tall trees, we can track the size of each tree and always link the root of the smaller tree to root of the larger one.<br>-&gt; data structure: Same as Quick-Union, an array storing the parent. Need additional int array sz[] to store the number of objects in each tree.<br>-&gt; Find: Same as Quick-Union, checking if the two items have the same root.<br>-&gt; Union: Need to compare the size of the two trees before merging to make sure the smaller one is linked to the larger one. Don’t forget to update the sz[] afterwards.<br>-&gt; Implementation &amp; Analysis: Tree is balanced by introducing sz[], and the Find takes time proportional to depth (at most \(lgN\) for N objects) of p and q, and Union takes constant time for given roots.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WeightedQuickUnionUF</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] id;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] sz;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WeightedQuickUnionUF</span><span class="params">(<span class="keyword">int</span> len)</span> </span>&#123;</div><div class="line">        id = <span class="keyword">new</span> <span class="keyword">int</span>[len];</div><div class="line">        sz = <span class="keyword">new</span> <span class="keyword">int</span>[len];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</div><div class="line">            id[i] = i;</div><div class="line">            sz[i] = <span class="number">1</span>;    <span class="comment">// only itself in its tree</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getRoot</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</div><div class="line">        <span class="keyword">while</span> (i != id[i]) &#123;</div><div class="line">            i = id[i];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> i;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isConnected</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> root(p) == root(q);</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">union</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> i = getRoot(p);</div><div class="line">        <span class="keyword">int</span> j = getRoot(q);</div><div class="line">        <span class="keyword">if</span> (i == j) &#123;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125; </div><div class="line">        <span class="keyword">if</span> (sz[i] &lt; sz[j]) &#123;</div><div class="line">            id[i] = j;</div><div class="line">            sz[j] += sz[i];</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            id[j] = i;</div><div class="line">            sz[i] += sz[j];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>-&gt; Provement for proposition “Depth of any node x is at most lg<em>N</em>“:<br>The depth of x increases by 1 when its tree T1 is merged to another larger tree T2. Since the size of T2 is larger than T1, the size of T1 at least doubles. The fact is that the tree containing x with size N can double at most \(lgN\) times. We can assume each time the tree containing x is merged, the newly-formed tree gets a doubled size N. So divide the size N by 2 again and again, we can trace back how many times was x added to this tree, which is exactly x’s depth, and obviously it can only be divided at most for \(lgN\) times.</p>
</li>
<li>Path Compression: Flat the tree simply by adding one line of code to Weighted Quick-Union! Always update the direct parent in the query process.<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WQUPC</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id[];</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> sz[];</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WQUPC</span><span class="params">(<span class="keyword">int</span> len)</span> </span>&#123;</div><div class="line">        id = <span class="keyword">new</span> <span class="keyword">int</span>[];</div><div class="line">        sz = <span class="keyword">new</span> <span class="keyword">int</span>[];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</div><div class="line">            id[i] = i;</div><div class="line">            sz[i] = <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getRoot</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</div><div class="line">        <span class="keyword">while</span> (i != id[i]) &#123;</div><div class="line">            id[i] = id[id[i]];    <span class="comment">// assign current node to its parent's parent</span></div><div class="line">            i = id[i];    <span class="comment">// If i is not updated, it is id[id[i]].</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> i;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isConnected</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;...&#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">union</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;...&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="Analysis-of-Algorithms"><a href="#Analysis-of-Algorithms" class="headerlink" title="Analysis of Algorithms"></a>Analysis of Algorithms</h3><h4 id="lt-Introduction"><a href="#lt-Introduction" class="headerlink" title="&lt; Introduction"></a>&lt; Introduction</h4><ul>
<li>Reason to analysis: predict performance, compare algorithms, provide guarantees and understand theoretical basis. More practically, avoid performance bugs.</li>
<li>Intrisic estimate: lg(Thousand) is about 10. lg(Million) is about 20. lg(Billion) is about 30.</li>
</ul>
<h4 id="lt-Observations"><a href="#lt-Observations" class="headerlink" title="&lt; Observations"></a>&lt; Observations</h4><ul>
<li>Timing a program:<br>-&gt; Measuring the running time: manually or use code to automatically trace the elapsed executing time.<br>-&gt; Empirical analysis: Use existing data of running time to estimate the unknown timing with different input scale. Usually we use Data analysis to find the regular between running time <em>T(N)</em> and input size N, which is assumed to be linear in the log-log plot. That is, \(lg(T(N)) = b*lgN + c\). Particularly, the ratio of \(lg(T(N))\) and \(lgN\)(slope in the log-log plot) can be estimated by take the lg value of the ratio of T(2t) and T(t).<br><img src="https://ww4.sinaimg.cn/large/9b3a5c2fgw1f9dmxo7lmpj20fh0913yx.jpg" alt=""></li>
</ul>
<h4 id="lt-Mathematical-models"><a href="#lt-Mathematical-models" class="headerlink" title="&lt; Mathematical models"></a>&lt; Mathematical models</h4><p> We can simply list all the operations in the program and their corresponding time as a function of input N in a table. But we have more choices to simplify the calculations. For example, we can only care about the most expensive part.</p>
<ul>
<li>Cost model: Select the most time-consuming operation to estimate. Among the <code>N + 2</code>, <code>N(N - 1)</code>, <code>1/2(N + 1)(N + 2)</code>, the cost model is the largest one <code>N(N - 1)</code>.</li>
<li>Tilde notation: Ignore the lower order terms. <code>N + 2</code>\(\rightarrow\) ~N, <code>N(N - 1)</code>\(\rightarrow\) ~\(N^2\), <code>1/2(N + 1)(N + 2)</code>\(\rightarrow\) ~\(\frac{1}{2}N^2\).</li>
</ul>
<h4 id="lt-Order-of-growth-classifications"><a href="#lt-Order-of-growth-classifications" class="headerlink" title="&lt; Order-of-growth classifications"></a>&lt; Order-of-growth classifications</h4><p> The order-of-growth classifications can be represented by a small set of functions:<br> 1, \(logN\), \(N\), \(NlgN\), \(N^2\), \(N^3\) and \(2^N\), whose log-log plot looks like this:<br> <img src="https://ww2.sinaimg.cn/large/9b3a5c2fgw1f9ds7dg6qpj20a40anmy1.jpg" alt=""><br> <img src="https://ww2.sinaimg.cn/large/9b3a5c2fgw1f9ds8jibjrj20mf0egjts.jpg" alt=""><br> Take a look at binary search. The Princeton version uses at most \(1 + lgN\) compares to search in a sorted array of size N.<br> <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Princeton version</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">binarySearch</span><span class="params">(<span class="keyword">int</span>[] a, <span class="keyword">int</span> key)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> lo = <span class="number">0</span>, hi = a.length - <span class="number">1</span>;</div><div class="line">    <span class="keyword">while</span> (lo &lt;= hi) &#123;</div><div class="line">        <span class="keyword">int</span> mid = lo + (hi - lo) / <span class="number">2</span>;</div><div class="line">        <span class="keyword">if</span> (key &lt; a[mid]) &#123;</div><div class="line">            hi = mid - <span class="number">1</span>;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key &gt; a[mid]) &#123;</div><div class="line">            lo = mid + <span class="number">1</span>;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> mid;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// My version</span></div><div class="line"><span class="function">pulbic <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">binarySearch2</span><span class="params">(<span class="keyword">int</span>[] a, <span class="keyword">int</span> key)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> left = <span class="number">0</span>, right = a.length - <span class="number">1</span>;</div><div class="line">    <span class="keyword">while</span> (left &lt; right) &#123;</div><div class="line">        <span class="keyword">int</span> mid = (left + right) / <span class="number">2</span>;</div><div class="line">        <span class="keyword">if</span> (key &gt; a[mid]) &#123;</div><div class="line">            left = mid + <span class="number">1</span>;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            right = mid;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (a[left] == key) &#123;</div><div class="line">        <span class="keyword">return</span> left</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="lt-Theory-of-algorithms"><a href="#lt-Theory-of-algorithms" class="headerlink" title="&lt; Theory of algorithms"></a>&lt; Theory of algorithms</h4><ul>
<li>Big Theta: Used to classify algorithms, take the exact order of growth. (term with maximum exponent)</li>
<li>Big Oh: Used to develop the upper bounds, where the actual cost should be smaller or equal to the term.</li>
<li>Big Omega: Used to develop the lower bounds, where the actual cost should be larger or equal to the term.</li>
<li>Tilde: <strong>Provide approximate model</strong>. Many people mistakenly take Big O() as approximate model.<br><img src="https://ww3.sinaimg.cn/large/9b3a5c2fgw1f9dwws0wwyj20pf0eita7.jpg" alt=""></li>
</ul>
<hr>
<h3 id="Bags-Stacks-and-Queues"><a href="#Bags-Stacks-and-Queues" class="headerlink" title="Bags, Stacks and Queues"></a>Bags, Stacks and Queues</h3><h4 id="lt-Separate-interface-and-implementation"><a href="#lt-Separate-interface-and-implementation" class="headerlink" title="&lt; Separate interface and implementation"></a>&lt; Separate interface and implementation</h4><ul>
<li>Client: program using operations defined in interface;</li>
<li>Interface: description of data type, basic operations;</li>
<li>Implementation: actual code making operations happen;</li>
<li>Deciplined design: create modular, reusable libraries.</li>
<li>Performance: try to optimize the implementations.</li>
<li>Prefer compile-time error and avoid run-time error, so that we can have some confidence that it will work for any client.</li>
</ul>
<h4 id="lt-Stack"><a href="#lt-Stack" class="headerlink" title="&lt; Stack"></a>&lt; Stack</h4><ul>
<li>LIFO: Last in first out.</li>
<li><p>Implementation Detail:<br>-&gt; Underflow: pop from an empty stack. Throw exception.<br>-&gt; Overflow: resize array in array version stack.<br>-&gt; Null items: Insertion of null items allowed?<br>-&gt; Loitering: Holding a reference to an object when it is no longer needed?</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">pop</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> s[--N];    <span class="comment">// the poped item still exists.</span></div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">pop</span><span class="params">()</span> </span>&#123;</div><div class="line">    String item = s[--N];</div><div class="line">    s[N] = <span class="keyword">null</span>;    <span class="comment">// Avoid Loitering: garbage collector will do the rest</span></div><div class="line">    <span class="keyword">return</span> itme;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>Resizing array version stack: In array implementation, every grow/shrink need to copy some existing items to new places. Too expensive!<br>-&gt; Grow: Double the size when full.<br>-&gt; Shrink: halve the size when 1/4 full. (1/2 would be too frequent when pop-push flipping)</p>
</li>
</ul>
<h4 id="lt-Queue"><a href="#lt-Queue" class="headerlink" title="&lt; Queue"></a>&lt; Queue</h4><ul>
<li>FIFO: First in first out.</li>
</ul>
<hr>
<h3 id="Elementery-Sorts"><a href="#Elementery-Sorts" class="headerlink" title="Elementery Sorts"></a>Elementery Sorts</h3><h4 id="lt-Comparable"><a href="#lt-Comparable" class="headerlink" title="&lt; Comparable"></a>&lt; Comparable</h4><ul>
<li>total order<br>-&gt; Antisymmetry: if \(v \le w\) and \(w \le v\), then \(v = w\).<br>-&gt; Transitivity: if \(v \le w\) and \(w \le x\), then \(v \le x\).<br>-&gt; Totality: either \(v \le w\) or \(w \le v\) or both.</li>
<li>Callback: reference to executable code.<br>-&gt; Java: Interfaces;<br>-&gt; C++:  class-type functors(伪函数，即);<br>-&gt; C:    function pointers;<br>-&gt; C#:   delegates;<br>-&gt; Python, JavaScript: first-class functions.</li>
<li>User-defined comparable types: Implement the Comparable interface for sort<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Date</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Date</span>&gt; </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> month, day, year;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Date</span><span class="params">(<span class="keyword">int</span> m, <span class="keyword">int</span> d, <span class="keyword">int</span> y)</span> </span>&#123;    <span class="comment">// Constructor</span></div><div class="line">        month = m;</div><div class="line">        day = d;</div><div class="line">        year = y;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Date that)</span> </span>&#123;    <span class="comment">// return - / 0 / +</span></div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.year &lt; that.year)    <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.year &gt; that.year)    <span class="keyword">return</span> +<span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.month &lt; that.month)    <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.month &gt; that.month)    <span class="keyword">return</span> +<span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.day &lt; that.day)    <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.day &gt; that.day)    <span class="keyword">return</span> +<span class="number">1</span>;</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="lt-Selection-Sort"><a href="#lt-Selection-Sort" class="headerlink" title="&lt; Selection Sort"></a>&lt; Selection Sort</h4><ul>
<li>Idea: Scan from starting index i to right and select the index j of minimum value. Then swap(a, i, j).<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">selectionSort</span><span class="params">(Comparable[] a)</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a.length; i++) &#123;</div><div class="line">        <span class="keyword">int</span> index = i;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; a.length; j++) &#123;</div><div class="line">            <span class="keyword">if</span> (less(a[j], a[index])) &#123;</div><div class="line">                index = j;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        swap(a, i, index);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="lt-Insertion-Sort"><a href="#lt-Insertion-Sort" class="headerlink" title="&lt; Insertion Sort"></a>&lt; Insertion Sort</h4><ul>
<li>Idea: Swap each larger item to a[i]’s left where a[0 ~ a-1] is already sorted.<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">insertionSort</span><span class="params">(Comparable[] a)</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a.length; i++) &#123;</div><div class="line">        <span class="keyword">for</span> (j = i; j &gt; <span class="number">0</span> &amp;&amp; less(a[j], a[j - <span class="number">1</span>]); j--) &#123;</div><div class="line">            swap(a, j, j - <span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="lt-Shell-Sort"><a href="#lt-Shell-Sort" class="headerlink" title="&lt; Shell Sort"></a>&lt; Shell Sort</h4><ul>
<li>Idea: insertion sort with decreasing increment.<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">shellSort</span><span class="params">(Comparable[] a)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> h = <span class="number">1</span>;</div><div class="line">    <span class="keyword">while</span> (h &lt; a.length / <span class="number">3</span>) &#123;</div><div class="line">        h = <span class="number">3</span>*h + <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">while</span> (h &gt;= <span class="number">1</span>) &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = h; i &lt; a.length; i++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &gt;= h &amp;&amp; less(a, j, j - h); j -= h) &#123;</div><div class="line">                swap(a, j, j - h);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        h = h / <span class="number">3</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="lt-Bubble-Sort"><a href="#lt-Bubble-Sort" class="headerlink" title="&lt; Bubble Sort"></a>&lt; Bubble Sort</h4><ul>
<li>Idea: Swap smaller value from the tail to the front at finished index i.<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">bubbleSort</span><span class="params">(Comparable[] a)</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a.length; i++) &#123;</div><div class="line">        <span class="keyword">for</span> (j = a.length - <span class="number">1</span>; j &gt; i; j--) &#123;</div><div class="line">            <span class="keyword">if</span> (less(a[j], a[j - <span class="number">1</span>])) &#123;</div><div class="line">                swap(a, j, j - <span class="number">1</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="Integer-Sort"><a href="#Integer-Sort" class="headerlink" title="Integer Sort"></a>Integer Sort</h3><p>These methods can only be applied to integer collections or objects that can be mapped to integers.</p>
<h4 id="lt-Bucket-Sort"><a href="#lt-Bucket-Sort" class="headerlink" title="&lt; Bucket Sort"></a>&lt; Bucket Sort</h4><ul>
<li>Idea: Mark the items in original collection in the auxillary bucket. Then output the indices that have marks in order.<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">bucketSort</span><span class="params">(<span class="keyword">int</span>[] a)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> bucket = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">999999</span>];</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a.length; i++) &#123;</div><div class="line">        bucket[a[i]] ++;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> j = <span class="number">0</span>, k = <span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span> (j &lt; a.length &amp;&amp; k &lt; bucket.length) &#123;</div><div class="line">        <span class="keyword">while</span> ((bucket[k]--) &gt; <span class="number">0</span>) &#123;</div><div class="line">            a[j++] = k;</div><div class="line">        &#125;</div><div class="line">        k++;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="lt-Radix-Sort"><a href="#lt-Radix-Sort" class="headerlink" title="&lt; Radix Sort"></a>&lt; Radix Sort</h4><ul>
<li>Idea: Sort with each digit, from unit digit to tens, to hundreds, etc.<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">radixSort</span><span class="params">(<span class="keyword">int</span>[] A, <span class="keyword">int</span> radix, <span class="keyword">int</span> maxLength)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span>[] temp = <span class="keyword">new</span> <span class="keyword">int</span>[A.length];</div><div class="line">    <span class="keyword">int</span>[] bucket = <span class="keyword">new</span> <span class="keyword">int</span>[radix];</div><div class="line">    </div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, devide = <span class="number">1</span>; i &lt; maxLength; i++) &#123;</div><div class="line">        Arrays.fill(bucket, <span class="number">0</span>);</div><div class="line">        System.arraycopy(A, <span class="number">0</span>, temp, <span class="number">0</span>, A.length);</div><div class="line">        </div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; A.length; j++) &#123;</div><div class="line">            <span class="keyword">int</span> subKey = (temp[j] / devide) % radix;</div><div class="line">            bucket[subKey]++;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; radix; j++) &#123;</div><div class="line">            bucket[j] = bucket[j] + bucket[j - <span class="number">1</span>];</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k = A.length - <span class="number">1</span>; k &gt;= <span class="number">0</span>; k--) &#123;</div><div class="line">            <span class="keyword">int</span> subKey = (temp[k] / devide) % radix;</div><div class="line">            bucket[subKey]--;</div><div class="line">            A[bucket[subKey]] = temp[k];</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        devide *= radix;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="Merge-Sort"><a href="#Merge-Sort" class="headerlink" title="Merge Sort"></a>Merge Sort</h3><h4 id="lt-Basic"><a href="#lt-Basic" class="headerlink" title="&lt; Basic"></a>&lt; Basic</h4><ul>
<li>Idea: devide and conquer. Let the ordered subsequence merge to the whole ordered sequence<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">mergeSort</span><span class="params">(Comparable[] A, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (start &gt;= end)</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    </div><div class="line">    <span class="keyword">int</span> mid = (start + end) / <span class="number">2</span>;</div><div class="line">    </div><div class="line">    mergeSort(A, start, mid);</div><div class="line">    mergeSort(A, mid + <span class="number">1</span>, end);</div><div class="line">    merge(A, start, mid, end);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">(Comparable[] A, <span class="keyword">int</span> start, <span class="keyword">int</span> mid, <span class="keyword">int</span> end)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> left = start;</div><div class="line">    <span class="keyword">int</span> right = mid + <span class="number">1</span>;</div><div class="line">    <span class="keyword">int</span> index = start;</div><div class="line">    Comparable[] temp = <span class="keyword">new</span> Comparable [A.length];</div><div class="line">    </div><div class="line">    <span class="comment">// the first half of A is in order. So as the second half.</span></div><div class="line">    <span class="keyword">while</span> (left &lt;= mid &amp;&amp; right &lt;= end) &#123;</div><div class="line">        <span class="keyword">if</span> (less(A[left], A[right])) &#123;</div><div class="line">            temp[index++] = A[left++];</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            temp[index++] = A[right++];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">// Collect the rest part of A into temp. Only one of the whiles can execute.</span></div><div class="line">    <span class="keyword">while</span> (left &lt;= mid) &#123;</div><div class="line">        temp[index++] = A[left++];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">while</span> (right &lt;= end) &#123;</div><div class="line">        temp[index++] = A[right++];</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">// copy the merged sequence in temp back to A</span></div><div class="line">    <span class="keyword">for</span> (index = start; index &lt;= end; index++) &#123;</div><div class="line">        A[index] = temp[index];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="lt-Improvement"><a href="#lt-Improvement" class="headerlink" title="&lt; Improvement"></a>&lt; Improvement</h4><ul>
<li>Insertion sort: When subarray is of small size, use insertion to get them sorted.</li>
<li>Check before merge: When a[mid] &lt; a[mid + 1], the two subarray is already in order, so no need to merge.<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">mergeSort</span><span class="params">(Comparable[] A, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (start &gt;= end)</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    </div><div class="line">    <span class="keyword">if</span> (end &lt;= start + CUTOFF - <span class="number">1</span>) &#123;    <span class="comment">// CUTOFF MIGHT BE 7</span></div><div class="line">        insertSort(A, start, end);</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">int</span> mid = (start + end) / <span class="number">2</span>;</div><div class="line">    mergeSort(A, start, mid);</div><div class="line">    mergeSort(A, mid + <span class="number">1</span>, end);</div><div class="line">    <span class="keyword">if</span> (!less(A[mid+<span class="number">1</span>], A[mid]))        <span class="comment">// Subarray already in order</span></div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    merge(A, start, mid, end);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>Switch a[] and aux[]: Elliminate the time to copy from a[] to aux[] by switching the sequence of parameters passing into merge() and sort() each time.<br><img src="https://ww1.sinaimg.cn/large/9b3a5c2fgy1fejwlq5nvtj20ff09baau.jpg" alt=""></li>
</ul>
<h4 id="lt-Comparator"><a href="#lt-Comparator" class="headerlink" title="&lt; Comparator"></a>&lt; Comparator</h4><ul>
<li>Comparable and Comparator interface: the former is about sorting using a type’s natural order, and the latter is about sorting using an alternative order. Comparator类似一个外部的比较器，如果不指定，则会调用该类内部的comparable来比较。<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Point2D</span> </span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> Comparator&lt;Point2D&gt; POLAR_ORDER = <span class="keyword">new</span> PolarOrder();</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">double</span> x, y;</div><div class="line">    ...</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">ccw</span><span class="params">(Point2D a, Point2D b, Point2D c)</span> </span>&#123; </div><div class="line">        <span class="keyword">double</span> area2 = (b.x-a.x)*(c.y-a.y) - (b.y-a.y)*(c.x-a.x);</div><div class="line">        <span class="keyword">if</span> (area2 &lt; <span class="number">0</span>) <span class="keyword">return</span> -<span class="number">1</span>; <span class="comment">// clockwise</span></div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (area2 &gt; <span class="number">0</span>) <span class="keyword">return</span> +<span class="number">1</span>; <span class="comment">// counter-clockwise</span></div><div class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">// collinear</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">PolarOrder</span> <span class="keyword">implements</span> <span class="title">Comparator</span>&lt;<span class="title">Point2D</span>&gt; </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Point2D q1, Point2D q2)</span> </span>&#123;</div><div class="line">            <span class="keyword">double</span> dy1 = q1.y - y;</div><div class="line">            <span class="keyword">double</span> dy2 = q2.y - y;</div><div class="line">            <span class="keyword">if</span> (dy1 == <span class="number">0</span> &amp;&amp; dy2 == <span class="number">0</span>) &#123; ... &#125;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (dy1 &gt;= <span class="number">0</span> &amp;&amp; dy2 &lt; <span class="number">0</span>) <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (dy2 &gt;= <span class="number">0</span> &amp;&amp; dy1 &lt; <span class="number">0</span>) <span class="keyword">return</span> +<span class="number">1</span>;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">return</span> -ccw(Point2D.<span class="keyword">this</span>, q1, q2);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="lt-Stablity"><a href="#lt-Stablity" class="headerlink" title="&lt; Stablity"></a>&lt; Stablity</h4><ul>
<li>Maintain the original order for equal value.</li>
<li>Useless? No! Think about firstly sort by field A and then B, how to guarantee the correct order that is already set in field A when sorting two equal B value? Only stable algorithm can.</li>
<li>Stable: Insertion, Merge</li>
<li>Instable: Selection, Shell, Quick</li>
</ul>
<hr>
<h3 id="Quick-Sort"><a href="#Quick-Sort" class="headerlink" title="Quick Sort"></a>Quick Sort</h3><h4 id="lt-Basic-1"><a href="#lt-Basic-1" class="headerlink" title="&lt; Basic"></a>&lt; Basic</h4><ul>
<li>Idea: Move the radix to somewhere so that the left-hand sides are all smaller than it and the right-hand sides are greater.<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">quickSort</span><span class="params">(Comparable[] A, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (start &gt;= end) </div><div class="line">        <span class="keyword">return</span>;            <span class="comment">// recursion ending condition.</span></div><div class="line">    </div><div class="line">    <span class="keyword">int</span> left = start, right = end;</div><div class="line">    Comparable pivot = A[(start + end)/<span class="number">2</span>];        <span class="comment">// take random item as pivot. Here it is the middle.</span></div><div class="line">    <span class="keyword">while</span> (left &lt;= right) &#123;</div><div class="line">        <span class="keyword">while</span> (left &lt;= right &amp;&amp; less(A[left], pivot))</div><div class="line">            left++;            <span class="comment">// from left to right to find the first item not smaller than pivot.</span></div><div class="line">        </div><div class="line">        <span class="keyword">while</span> (left &lt;= right &amp;&amp; greater(A[right], pivot)) </div><div class="line">            right--;        <span class="comment">// from right to left to find the first item not greater than pivot.</span></div><div class="line">        </div><div class="line">        <span class="keyword">if</span> (left &lt;= right) &#123;</div><div class="line">            swap(A, left, right);  <span class="comment">// let the greater-than-pivot item swap with the smaller one</span></div><div class="line">            left++;     </div><div class="line">            right--;    <span class="comment">// continue to </span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    quickSort(A, start, right);</div><div class="line">    quickSort(A, left, end);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="lt-Improvement-1"><a href="#lt-Improvement-1" class="headerlink" title="&lt; Improvement"></a>&lt; Improvement</h4><ul>
<li>Insertion sort: When subarray is of small size, use insertion to get them sorted.</li>
<li>Median as pivot: Take sample 3 items to estimate the median of the list, and swap the median to the front as pivot.</li>
</ul>
<h4 id="lt-3-way-QuickSort"><a href="#lt-3-way-QuickSort" class="headerlink" title="&lt; 3-way QuickSort"></a>&lt; 3-way QuickSort</h4><ul>
<li>Idea: Since quickSort goes quadratic unless partitioning stops on equal keys, in equal-keys-prevail array, put all items equal to the pivot in place by adding lt and gt.<br><img src="https://ww1.sinaimg.cn/large/9b3a5c2fgy1fejyqzz1b9j20im0cn0ts.jpg" alt=""></li>
</ul>
<h4 id="lt-Usage"><a href="#lt-Usage" class="headerlink" title="&lt; Usage"></a>&lt; Usage</h4><ul>
<li>Quick-Selection: Select the kth max/min item.</li>
</ul>
<hr>
<h3 id="Priority-Queues"><a href="#Priority-Queues" class="headerlink" title="Priority Queues"></a>Priority Queues</h3><h4 id="lt-Binary-heaps"><a href="#lt-Binary-heaps" class="headerlink" title="&lt; Binary heaps"></a>&lt; Binary heaps</h4><ul>
<li>binary tree: empty or node with links to left and right binary trees.</li>
<li>complete tree: prefectly balanced, except for the bottom level.</li>
<li>height of complete tree: \(\lfloor lgN \rfloor\) with \(N\) nodes.(???So one-node tree means 0?)</li>
<li>binary heap: each parent has a larger key than its children.<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">createMaxHeap</span><span class="params">(Comparable[] A, <span class="keyword">int</span> end)</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = (end - <span class="number">1</span>) / <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--) &#123;    <span class="comment">// Start from the father of the very last child</span></div><div class="line">        <span class="keyword">int</span> fatherIndex = i;</div><div class="line">        <span class="keyword">while</span> (<span class="number">2</span> * fatherIndex + <span class="number">1</span> &lt;= end) &#123;    <span class="comment">// If the node has at least a left child</span></div><div class="line">            <span class="keyword">int</span> biggerIndex = <span class="number">2</span> * fatherIndex + <span class="number">1</span>;</div><div class="line">            <span class="keyword">if</span> (biggerIndex &lt; end) &#123;    <span class="comment">// If it also has a right child</span></div><div class="line">                <span class="keyword">if</span> (less(A[biggerIndex], A[biggerIndex + <span class="number">1</span>]))</div><div class="line">                    biggerIndex ++;        <span class="comment">// Select the bigger one between left &amp; right</span></div><div class="line">            &#125;</div><div class="line">            </div><div class="line">            <span class="keyword">if</span> (less(A[fatherIndex], A[biggerIndex])) &#123;    <span class="comment">// If the father is smaller than the bigger child</span></div><div class="line">                swap(A, fatherIndex, biggerIndex);</div><div class="line">                fatherIndex = biggerIndex;        <span class="comment">// Continue to compare to the childen after swap</span></div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="keyword">break</span>;        <span class="comment">// father is already the greatest</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="lt-HeapSort"><a href="#lt-HeapSort" class="headerlink" title="&lt; HeapSort"></a>&lt; HeapSort</h4><ul>
<li>Idea: Take the root of binary heap and rebuild the heap.<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">maxHeapSort</span><span class="params">(Comparable[] A)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> size = A.length;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</div><div class="line">        createMaxHeap(A, size - <span class="number">1</span> - i);</div><div class="line">        swap(A, <span class="number">0</span>, size - <span class="number">1</span> - i);       <span class="comment">// put the max root at the end</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">createMaxHeap</span><span class="params">(Comparable[] A, <span class="keyword">int</span> end)</span> </span>&#123;...&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="https://ww1.sinaimg.cn/large/9b3a5c2fgy1fek5wjqbxuj20i10a1gmm.jpg" alt=""></p>
<hr>
<h3 id="Binary-Search-Trees-BSTs"><a href="#Binary-Search-Trees-BSTs" class="headerlink" title="Binary Search Trees(BSTs)"></a>Binary Search Trees(BSTs)</h3><h4 id="lt-Basic-2"><a href="#lt-Basic-2" class="headerlink" title="&lt; Basic"></a>&lt; Basic</h4><ul>
<li>Definition: A BST is a binary tree with an order where each node’s key is larger than all keys in its left subtrees and smaller than all keys in its right subtree.</li>
<li>Node: 4 fields - key, value, reference to left and right subtree.</li>
<li>Improvement: Add one more field “int count” to track the size of each subtree at the corresponding root node. Help with rank() and select();</li>
</ul>
<h4 id="lt-Operations"><a href="#lt-Operations" class="headerlink" title="&lt; Operations"></a>&lt; Operations</h4><ul>
<li><p>Floor: get the biggest key that is smaller than the given key.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> Key <span class="title">floor</span><span class="params">(Key key)</span> </span>&#123;</div><div class="line">	Node x = floor(root, key);</div><div class="line">	<span class="keyword">if</span> (x == <span class="keyword">null</span>) &#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> x.key;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">floor</span><span class="params">(Node x, Key key)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span> (x == <span class="keyword">null</span>) &#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> cmp = key.compareTo(x.key);</div><div class="line"></div><div class="line">	<span class="keyword">if</span> (cmp == <span class="number">0</span>) &#123;</div><div class="line">		<span class="keyword">return</span> x;</div><div class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>) &#123;</div><div class="line">		<span class="keyword">return</span> floor(x.left, key);</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		Node t = floor(x.right, key);</div><div class="line">		<span class="keyword">if</span> (t != <span class="keyword">null</span>) &#123;</div><div class="line">			<span class="keyword">return</span> t;</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			<span class="keyword">return</span> x;</div><div class="line">		&#125;</div><div class="line"> 	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>Ceiling: get the smallest key that is bigger than the given key.</p>
</li>
<li><p>Rank: The number of keys that are smaller than the given one.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">rank</span><span class="params">(Key key, Node x)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span> (x == <span class="keyword">null</span>) &#123;</div><div class="line">		<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> cmp = key.compareTo(x.key);</div><div class="line">	<span class="keyword">if</span> (cmp &lt; <span class="number">0</span>) &#123;</div><div class="line">		<span class="keyword">return</span> rank(key, x.left);</div><div class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) &#123;</div><div class="line">		<span class="keyword">return</span> <span class="number">1</span> + size(x.left) + rank(key, x.right);</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		<span class="keyword">return</span> size(x.left)</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>In-order traversal: Traverse the left subtree before output the current root value; tranverse  right subtree after root output.</p>
</li>
</ul>
<h4 id="lt-Deletion"><a href="#lt-Deletion" class="headerlink" title="&lt; Deletion"></a>&lt; Deletion</h4><ul>
<li>Lazy version: Simply set the value of that node to null. But unsatisfying for memory overloaded.</li>
<li><p>DeleteMin: Go left all the way until a node with null left link, and replace that node with its right link. Update the count.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">deleteMin</span><span class="params">(Node x)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span> (x.left == <span class="keyword">null</span>) &#123;</div><div class="line">		<span class="keyword">return</span> x.right;</div><div class="line">	&#125;</div><div class="line">	x.left = deleteMin(x.left);</div><div class="line">	x.count = <span class="number">1</span> + size(x.left) + size(x.right);</div><div class="line">	<span class="keyword">return</span> x;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>Hibbard deletion:<br>-&gt; [0 children]: Set its parent’s corresponding link to null.<br><img src="https://ww1.sinaimg.cn/large/9b3a5c2fgy1fektggt7ruj20g006xmxw.jpg" alt=""><br>-&gt; [1 child]: Set its parent’s corresponding link to its only child.<br><img src="https://ww1.sinaimg.cn/large/9b3a5c2fgy1fektiv93z6j20gu068js4.jpg" alt=""><br>-&gt; [2 children]: Find the key and put the minimum key in its right subtree on its spot.<br><img src="https://ww1.sinaimg.cn/large/9b3a5c2fgy1feku127a8qj20gf09rdhf.jpg" alt=""></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Key key)</span> </span>&#123;</div><div class="line">	root = delete(root, key);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">delete</span><span class="params">(Node x, Key key)</span> </span>&#123;  <span class="comment">// Recursive code!!!</span></div><div class="line">	<span class="keyword">if</span> (x == <span class="keyword">null</span>) &#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> cmp = key.compareTo(x.key);</div><div class="line">	<span class="keyword">if</span> (cmp &lt; <span class="number">0</span>) &#123;</div><div class="line">		x.left = delete(x.left, key);</div><div class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) &#123;</div><div class="line">		x.right = delete(x.right, key);</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		<span class="keyword">if</span> (x.right == <span class="keyword">null</span>) &#123;</div><div class="line">			<span class="keyword">return</span> x.left;</div><div class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (x.left == <span class="keyword">null</span>) &#123;</div><div class="line">			<span class="keyword">return</span> x.right;</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			Node t = x;</div><div class="line">			x = min(t.right);</div><div class="line">			x.right = deleteMin(t.right);</div><div class="line">			x.left = t.left;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	x.count = <span class="number">1</span> + size(x.left) + size(x.right);</div><div class="line">	<span class="keyword">return</span> x;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="Balanced-Search-Trees"><a href="#Balanced-Search-Trees" class="headerlink" title="Balanced Search Trees"></a>Balanced Search Trees</h3><h4 id="lt-2-3-search-trees"><a href="#lt-2-3-search-trees" class="headerlink" title="&lt; 2-3 search trees"></a>&lt; 2-3 search trees</h4><ul>
<li>Variable number of keys per node<br>-&gt; 2-node: one key, two children. left &lt; key &lt; right.<br>-&gt; 3-node: two keys, three children. left &lt; key1 &lt; mid &lt; key2 &lt; right.</li>
<li>Insertion at the bottom:<br>-&gt; 2-node: Simply add the key into it and yields a 3-node.<br>-&gt; 3-node: Add the key and made it temporary 4-node, and then split it by passing the middle key into the parent node, and continue to pass up if necessary.</li>
<li>Perfect balance: Every path from root to null link has the same length.<h4 id="lt-red-black-BSTs"><a href="#lt-red-black-BSTs" class="headerlink" title="&lt; red-black BSTs"></a>&lt; red-black BSTs</h4></li>
<li><p>Idea: represent 2-3 search trees as a BST with two types of links. <strong>Null links are black</strong>.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">boolean</span> RED = <span class="keyword">true</span>;</div><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">boolean</span> BLACK = <span class="keyword">false</span>;</div><div class="line"></div><div class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</div><div class="line">	Key key;</div><div class="line">	Value val;</div><div class="line">	Node left, right;</div><div class="line">	<span class="keyword">boolean</span> color;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>Left-leaning: Force red link leaning to the left as valid glue of a 3-node.<br><img src="https://ww1.sinaimg.cn/large/9b3a5c2fgy1fel314v2v0j20iq05tjs6.jpg" alt=""></p>
</li>
<li>Rule:<br>-&gt; No node has two red links connected(which means it’s a 4-node).<br>-&gt; Every path from root to null link has the same number of black links.<br>-&gt; Red links leans left.</li>
<li><p>Search: Implemenation is the same but runs faster than BSTs because of better balance.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> Val <span class="title">get</span><span class="params">(Key key)</span> </span>&#123;</div><div class="line">	Node x = root;</div><div class="line">	<span class="keyword">while</span> (x != <span class="keyword">null</span>) &#123;</div><div class="line">		<span class="keyword">int</span> cmp = key.compareTo(x.key);</div><div class="line">		<span class="keyword">if</span> (cmp &lt; <span class="number">0</span>) &#123;</div><div class="line">			x = x.left;</div><div class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) &#123;</div><div class="line">			x = x.right;</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			<span class="keyword">return</span> x.val;</div><div class="line">		&#125;</div><div class="line">	&#125; </div><div class="line">	<span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>Elementary Operations<br>-&gt; Rotate Left: When right leaning red links occurs, rotate it left.<br><img src="https://ww1.sinaimg.cn/large/9b3a5c2fgy1fel3v5hx7ij20ez05gjs6.jpg" alt=""></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">rotateLeft</span><span class="params">(Node h)</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">assert</span> <span class="title">isRed</span><span class="params">(h.right)</span></span>;</div><div class="line">	Node x = h.right;</div><div class="line">	h.right = x.left;</div><div class="line">	x.left = h;</div><div class="line">	x.color = h.color;</div><div class="line">	h.color = RED;</div><div class="line">	<span class="keyword">return</span> x;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>-&gt; Rotate Right: When a node has consecutive red links, rotate the upper red link right.<br><img src="https://ww1.sinaimg.cn/large/9b3a5c2fgy1fel3zuw9tsj20f305p0tj.jpg" alt=""></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">rotateRight</span><span class="params">(Node h)</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">assert</span> <span class="title">isRed</span><span class="params">(h.left)</span></span>;</div><div class="line">	Node x = h.left;</div><div class="line">	h.left = x.right;</div><div class="line">	x.right = h;</div><div class="line">	x.color = h.color;</div><div class="line">	h.color = RED;</div><div class="line">	<span class="keyword">return</span> x;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>-&gt; Color flip: When two red links connected to same parent node, flip the color to split this 4-node.<br><img src="https://ww1.sinaimg.cn/large/9b3a5c2fgy1fel434t00mj20lt058myb.jpg" alt=""></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">flipColors</span><span class="params">(Node h)</span> </span>&#123;</div><div class="line">	<span class="keyword">assert</span> !isRed(h);</div><div class="line">	<span class="function"><span class="keyword">assert</span> <span class="title">isRed</span><span class="params">(h.left)</span></span>;</div><div class="line">	<span class="function"><span class="keyword">assert</span> <span class="title">isRed</span><span class="params">(h.right)</span></span>;</div><div class="line">	h.color = RED;</div><div class="line">	h.left.color = BLACK;</div><div class="line">	h.right.color = BLACK;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>Insertion at the bottom:<br>-&gt; 2-node: Color new link red and rotate if right leaning.<br>-&gt; 3-node: Color new link red and rotate and/or flip along the way to the root to keep balance. Pay attention to the order to cope with 3 kinds of situation that break the balance.<br><img src="https://ww1.sinaimg.cn/large/9b3a5c2fgy1fel5gjkyzxj20h8051jrz.jpg" alt=""></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">put</span><span class="params">(Node h, Key key, Value val)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span> (h == <span class="keyword">null</span>) &#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> Node(key, val, RED);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> cmp = key.compareTo(h.key);</div><div class="line">	<span class="keyword">if</span> (cmp &lt; <span class="number">0</span>) &#123;</div><div class="line">		h.left = put(h.left, key, val);</div><div class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) &#123;</div><div class="line">		h.right = put(h.right, key, val);</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		h.val = val;</div><div class="line">	</div><div class="line">	<span class="keyword">if</span> (isRed(h.right) &amp;&amp; !isRed(h.left)) &#123;</div><div class="line">		h = rotateLeft(h);</div><div class="line">	&#125;</div><div class="line">	<span class="comment">// NOT elseif !!!</span></div><div class="line">	<span class="keyword">if</span> (isRed(h.left) &amp;&amp; isRed(h.left.left)) &#123;</div><div class="line">		h = rotateRight(h);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> (isRed(h.left) &amp;&amp; isRed(h.right)) &#123;</div><div class="line">		flipColors(h);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="Geometric-Search"><a href="#Geometric-Search" class="headerlink" title="Geometric Search"></a>Geometric Search</h3><h4 id="lt-1D-range-search"><a href="#lt-1D-range-search" class="headerlink" title="&lt; 1D range search"></a>&lt; 1D range search</h4><ul>
<li>Range search: Find all keys between k1 and k2.</li>
<li>Range count: Number of keys between k1 and k2.</li>
<li><p>BST RC: Simply use rank to get the range count.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">(Key lo, Key hi)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span> (contains(hi)) &#123;</div><div class="line">		<span class="keyword">return</span> rank(hi) - rank(lo) + <span class="number">1</span>;</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		<span class="keyword">return</span> rank(hi)</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>BST RS:<br>-&gt; Recusively find all keys in left subtree;<br>-&gt; Check key in current node;<br>-&gt; Recusively find all keys in right subtree;<br><img src="https://ww1.sinaimg.cn/large/9b3a5c2fgy1felgexk0coj20az07ygmb.jpg" alt=""></p>
<h4 id="lt-2D-orthogonal-range-search"><a href="#lt-2D-orthogonal-range-search" class="headerlink" title="&lt; 2D orthogonal range search"></a>&lt; 2D orthogonal range search</h4></li>
<li>Range search: Find all keys lying in a 2D range.</li>
<li>Range count: Number of keys lying in a 2D range.</li>
<li>Data structure: BST using x and y coordinates alternatively.<br><img src="https://ww1.sinaimg.cn/large/9b3a5c2fgy1felhpsdl9fj20h009c3z3.jpg" alt=""></li>
<li>2D tree RS:<br>-&gt; Check if current node is in range(ractangle);<br>-&gt; Recusively check all keys in left/bottom subtrees;<br>-&gt; Recusively check all keys in right/top subtrees.<br><img src="https://ww1.sinaimg.cn/large/9b3a5c2fgy1feli02gn3oj20hh07eglx.jpg" alt=""></li>
<li>Nearest neighbour search:<br>-&gt; Check distance from current point to the query point;<br>-&gt; Recusively check left/bottom;<br>-&gt; Recusively check right/top. When getting closer to the query point, some search is pruned.<br><img src="https://ww1.sinaimg.cn/large/9b3a5c2fgy1felwoqf4hrj20hg07dt92.jpg" alt=""><h4 id="lt-Interval-search-trees"><a href="#lt-Interval-search-trees" class="headerlink" title="&lt; Interval search trees"></a>&lt; Interval search trees</h4></li>
<li>BST with node storing interval. Use left endpoint as key and store max endpoint of each subtree at root.<br><img src="https://ww1.sinaimg.cn/large/9b3a5c2fgy1felxvsjf1bj20df07mgm1.jpg" alt=""></li>
<li>Insertion: Use left endpoint as key to insert and update max endpoint along the search path.<br><img src="https://ww1.sinaimg.cn/large/9b3a5c2fgy1felxzyi9ykj20ff07rwf2.jpg" alt=""></li>
<li>Search:<br>-&gt; If interval in node intersects query interval, return it.<br>-&gt; Else if left subtree is null, go right.<br>-&gt; Else if max endpoint in left subtree is less than lo, go right.<br>-&gt; Else go left.<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> Interval <span class="title">get</span><span class="params">(Key lo, Key hi)</span> </span>&#123;</div><div class="line">	Node x = root;</div><div class="line">	<span class="keyword">while</span> (x != <span class="keyword">null</span>) &#123;</div><div class="line">		<span class="keyword">if</span> (x.interval.intersects(lo, hi)) &#123;</div><div class="line">			<span class="keyword">return</span> x.interval;</div><div class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (x.left == <span class="keyword">null</span>) &#123;</div><div class="line">			x = x.right;</div><div class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (x.left.max &lt; lo) &#123;</div><div class="line">			x = x.right;</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			x = x.left;</div><div class="line">		&#125;</div><div class="line"> 	&#125;</div><div class="line"> 	<span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="lt-Rectangle-intersection"><a href="#lt-Rectangle-intersection" class="headerlink" title="&lt; Rectangle intersection"></a>&lt; Rectangle intersection</h4><ul>
<li>Find all intersections among a set of N orthogonal rectangles.</li>
<li>Sweep vertical line method: Triggered by endpoints’ x-coordinates, maintain the y-intervals in BST; Left endpoints trigger interval search for that y-interval and insert, while right endpoints trigger removal of that interval.<br><img src="https://ww1.sinaimg.cn/large/9b3a5c2fgy1fem0raqmocj20g206omx4.jpg" alt=""></li>
</ul>
<hr>
<h3 id="Hash-Tables"><a href="#Hash-Tables" class="headerlink" title="Hash Tables"></a>Hash Tables</h3><h4 id="lt-Hash-function"><a href="#lt-Hash-function" class="headerlink" title="&lt; Hash function"></a>&lt; Hash function</h4><ul>
<li>Idea: Save items in key-index table, where index is a hash function of key.</li>
<li><p>Hash in user-defined types: make use of prime numbers and built-in hashCode() for Java classes.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Transaction</span> <span class="keyword">implements</span> <span class="title">comparable</span>&lt;<span class="title">Transaction</span>&gt; </span>&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">final</span> String who;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">final</span> Date when;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">double</span> amount;</div><div class="line"></div><div class="line">	...</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">int</span> hash = <span class="number">17</span>;</div><div class="line">		hash = <span class="number">31</span>*hash + who.hashCode();</div><div class="line">		hash = <span class="number">31</span>*hash + when.hashCode();</div><div class="line">		hash = <span class="number">31</span>*hash + ((Double) amount).hashCode();</div><div class="line">		<span class="keyword">return</span> hash;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>Collision: Two distinct keys hashing to same index.</p>
</li>
<li>Separate chaining: maintain a chain for the collided keys.</li>
<li>Linear probing: find next empty slot.</li>
</ul>

      
    </div>

    

    
    
    

    

    
      
    
    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>└(^o^)┘</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>Donate</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechat.png" alt="Bob_波波 WeChat Pay"/>
        <p>WeChat Pay</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.png" alt="Bob_波波 Alipay"/>
        <p>Alipay</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/java/" rel="tag"><i class="fa fa-tag"></i> java</a>
          
            <a href="/tags/algorithm/" rel="tag"><i class="fa fa-tag"></i> algorithm</a>
          
            <a href="/tags/coursera/" rel="tag"><i class="fa fa-tag"></i> coursera</a>
          
            <a href="/tags/dataStructure/" rel="tag"><i class="fa fa-tag"></i> dataStructure</a>
          
        </div>
      

      
      
        <div class="post-widgets">
        

        

        
          
          <div class="social_share">
            
            
               <div id="needsharebutton-postbottom">
                 <span class="btn">
                    <i class="fa fa-share-alt" aria-hidden="true"></i>
                 </span>
               </div>
            
          </div>
        
        </div>
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/10/15/javascript_professional_3/" rel="next" title="(Suspended)Note for Professional JavaScript for Web Developers (3/4)">
                <i class="fa fa-chevron-left"></i> (Suspended)Note for Professional JavaScript for Web Developers (3/4)
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/11/07/reading_note/" rel="prev" title="闲书摘录2016">
                闲书摘录2016 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="Bob_波波"/>
            
              <p class="site-author-name" itemprop="name">Bob_波波</p>
              <p class="site-description motion-element" itemprop="description">I'm a Software Engineer!</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">38</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">3</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">38</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2016 – <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-futbol-o"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Bob_波波</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a></div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv" title="Total Visitors">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="site-pv" title="Total Views">
      <i class="fa fa-history"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    

    

    

    
      <div>
        <!-- Go to www.addthis.com/dashboard to customize your tools -->
<div class="addthis_inline_share_toolbox">
  <script type = "text/javascript" src = "//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-593135f4e114024c" async = "async" ></script>
</div>

      </div>
    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=6.7.0"></script>

  <script src="/js/src/motion.js?v=6.7.0"></script>



  
  


  <script src="/js/src/affix.js?v=6.7.0"></script>

  <script src="/js/src/schemes/pisces.js?v=6.7.0"></script>



  
  <script src="/js/src/scrollspy.js?v=6.7.0"></script>
<script src="/js/src/post-details.js?v=6.7.0"></script>



  


  <script src="/js/src/bootstrap.js?v=6.7.0"></script>



  

  
    <script id="dsq-count-scr" src="https://bobbyliujb.disqus.com/count.js" async></script>
  

  
    <script>
      var disqus_config = function () {
        this.page.url = "https://bobbyliujb.github.io/2016/11/02/coursera_algorithm1/";
        this.page.identifier = "2016/11/02/coursera_algorithm1/";
        this.page.title = 'Note for coursera Princeton Algorithm I';
        };
      function loadComments () {
        var d = document, s = d.createElement('script');
        s.src = 'https://bobbyliujb.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      }
      
        loadComments();
      
    </script>
  













  

  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('10');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script>
    
    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();

      Counter('get', '/classes/Counter', { where: JSON.stringify({ url }) })
        .done(function ({ results }) {
          if (results.length > 0) {
            var counter = results[0];
            
            Counter('put', `/classes/Counter/${counter.objectId}`, JSON.stringify({ time: { "__op":"Increment", "amount":1 } }))
            
            .done(function () {
                  var $element = $(document.getElementById(url));
                  $element.find('.leancloud-visitors-count').text(counter.time + 1);
            })
            
            .fail(function ({ responseJSON }) {
                console.log('Failed to save Visitor num, with error message: ' + responseJSON.error);
            })
          } else {
            
              var $element = $(document.getElementById(url));
              $element.find('.leancloud-visitors-count').text('Counter not initialized! See more at console err msg.');
              console.error('ATTENTION! LeanCloud counter has security bug, see here how to solve it: https://github.com/theme-next/hexo-leancloud-counter-security. \n But you also can use LeanCloud without security, by set \'security\' option to \'false\'.');
            
          }
        })
      .fail(function ({ responseJSON }) {
        console.log('LeanCloud Counter Error:' + responseJSON.code + " " + responseJSON.error);
      });
    }
    

    $(function() {
      $.get('https://app-router.leancloud.cn/2/route?appId=' + "jT7i5auNazMHRONSPUHmcoko-gzGzoHsz")
        .done(function ({ api_server }) {
          var Counter = function (method, url, data) {
            return $.ajax({
              method: method,
              url: `https://${api_server}/1.1${url}`,
              headers: {
                'X-LC-Id': "jT7i5auNazMHRONSPUHmcoko-gzGzoHsz",
                'X-LC-Key': "dEWwuVre5Svmwvjw2DmcIbLy",
                'Content-Type': 'application/json',
              },
              data: data,
            });
          };
          
          addCount(Counter);
          
        })
    });
  </script>



  

  

  

  

  
  
  
  <script src="/lib/needsharebutton/needsharebutton.js"></script>
  <script>
    
      pbOptions = {};
      
        pbOptions.iconStyle = "box";
      
        pbOptions.boxForm = "horizontal";
      
        pbOptions.position = "topCenter";
      
        pbOptions.networks = "Linkedin,Weibo,Wechat,Twitter,Facebook,Pinterest,GooglePlus,Evernote,Reddit,Douban,QQZone,Mailto";
      
      new needShareButton('#needsharebutton-postbottom', pbOptions);
    
    
  </script>


  

  

  

  

  

  

  

</body>
</html>
